<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title class="zh">æ·±åº¦å…±è¯†è€…å…¬ç¤º - DOG Miner</title>
    <title class="en hidden">Deep Consensus Monitor - DOG Miner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6C5CE7',
                        secondary: '#00F5D4',
                        dark: '#0F172A',
                        darker: '#0A0F1C',
                        light: '#E2E8F0',
                        danger: '#EF4444',
                        success: '#10B981',
                        warning: '#F59E0B'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-gradient {
                background-clip: text;
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            }
            .bg-grid {
                background-image: radial-gradient(rgba(108, 92, 231, 0.1) 1px, transparent 1px);
                background-size: 20px 20px;
            }
            .card-hover {
                transition: all 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-10px);
                box-shadow: 0 20px 25px -5px rgba(108, 92, 231, 0.1), 0 10px 10px -5px rgba(108, 92, 231, 0.04);
            }

            /* æ’è¡Œæ¦œå¼¹çª—æ ·å¼ */
            .ranking-modal-item {
                position: relative;
                overflow: hidden;
                transition: all 0.3s ease;
                border-radius: 0.75rem;
            }

            .ranking-modal-item:hover {
                transform: translateY(-2px);
            }

            .ranking-modal-item::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
                transition: left 0.6s ease;
            }

            .ranking-modal-item:hover::before {
                left: 100%;
            }

            /* å‰ååå‘å…‰æ•ˆæœ */
            .ranking-modal-item:nth-child(-n+10) {
                box-shadow: 0 0 15px rgba(108, 92, 231, 0.2);
            }

            .ranking-modal-item:nth-child(-n+10):hover {
                box-shadow: 0 0 25px rgba(108, 92, 231, 0.3);
            }

            /* å‰ä¸‰åç‰¹æ®Šæ•ˆæœ - ç§»é™¤é»˜è®¤æ ·å¼ï¼Œå› ä¸ºå·²ç»åœ¨JavaScriptä¸­åŠ¨æ€è®¾ç½® */

            .modal-backdrop {
                backdrop-filter: blur(8px);
                background-color: rgba(10, 15, 28, 0.7);
            }
            .animate-scale-in {
                animation: scaleIn 0.3s ease-out;
            }
            @keyframes scaleIn {
                from {
                    opacity: 0;
                    transform: scale(0.9);
                }
                to {
                    opacity: 1;
                    transform: scale(1);
                }
            }
            /* è¡¨æ ¼ç§»åŠ¨ç«¯ä¼˜åŒ– */
            @media (max-width: 768px) {
                .table-container {
                    font-size: 0.875rem;
                }
                .table-container th,
                .table-container td {
                    padding: 0.5rem 0.25rem;
                }
                .table-container .min-w-200px {
                    min-width: 140px;
                }
                .table-container .text-sm {
                    font-size: 0.75rem;
                }
            }
            .animate-pulse-green {
                animation: pulseGreen 2s infinite;
            }
            @keyframes pulseGreen {
                0%, 100% { background-color: rgba(16, 185, 129, 0.1); }
                50% { background-color: rgba(16, 185, 129, 0.3); }
            }
            .animate-pulse-red {
                animation: pulseRed 2s infinite;
            }
            @keyframes pulseRed {
                0%, 100% { background-color: rgba(239, 68, 68, 0.1); }
                50% { background-color: rgba(239, 68, 68, 0.3); }
            }

            /* æ’åºåŠŸèƒ½æ ·å¼ */
            .sortable-header {
                user-select: none;
                transition: all 0.2s ease;
            }
            .sortable-header:hover {
                background-color: rgba(108, 92, 231, 0.05);
            }
            .sort-icons {
                line-height: 0.75rem;
            }
            .sort-up, .sort-down {
                transition: all 0.2s ease;
            }
            /* Tab æŒ‰é’®æ ·å¼ */
            .tab-button {
                position: relative;
            }
            .tab-button.active {
                color: #00F5D4;
            }
            .tab-button:not(.active) {
                color: rgba(226, 232, 240, 0.6);
            }
            .tab-button:not(.active):hover {
                color: rgba(226, 232, 240, 0.9);
            }

            /* æ’è¡Œæ¦œå¼¹çª—ç§»åŠ¨ç«¯é€‚é… */
            @media (max-width: 768px) {
                /* å¼¹çª—åœ¨ç§»åŠ¨ç«¯çš„å…¨å±æ˜¾ç¤º */
                #ranking-modal .flex.items-center.justify-center {
                    padding: 1rem;
                }

                #ranking-modal .bg-darker.rounded-2xl {
                    max-width: 100vw;
                    max-height: 90vh;
                    margin: 0;
                    border-radius: 1rem;
                }

                /* å¼¹çª—å¤´éƒ¨ç§»åŠ¨ç«¯ä¼˜åŒ– */
                #ranking-modal .flex.items-center.justify-between {
                    padding: .1rem;
                }

                #ranking-modal h2 {
                    font-size: 1.125rem; /* text-lg */
                }

                #ranking-modal .fa-trophy {
                    font-size: 1.25rem; /* text-xl */
                    margin-right: 0.5rem;
                }

                #ranking-modal .fa-times {
                    font-size: 1.125rem; /* text-lg */
                }

                /* å¼¹çª—å†…å®¹ç§»åŠ¨ç«¯ä¼˜åŒ– */
                #ranking-modal .p-6.overflow-y-auto {
                    padding: 1rem;
                    max-height: 70vh;
                }

                /* æ’è¡Œæ¦œé¡¹ç›®ç§»åŠ¨ç«¯ä¼˜åŒ– */
                .ranking-modal-item {
                    padding: 0.75rem;
                    margin-bottom: 0.5rem;
                }

                /* æ’åå›¾æ ‡ç§»åŠ¨ç«¯ä¼˜åŒ– - å·²ç»åœ¨HTMLä¸­å¤„ç† */
                /* .ranking-modal-item .flex-shrink-0.w-12.h-12 åœ¨HTMLä¸­å·²ç»è®¾ç½® */

                /* è´¡çŒ®é‡‘é¢ç§»åŠ¨ç«¯ä¼˜åŒ– - å·²ç»åœ¨HTMLä¸­å¤„ç† */
                /* .ranking-modal-item .text-xl.sm\:text-2xl åœ¨HTMLä¸­å·²ç»è®¾ç½® */

                /* æ’è¡Œæ¦œé¡¹ç›®ä¹‹é—´çš„é—´è·ä¼˜åŒ– */
                .space-y-1 > .ranking-modal-item {
                    margin-bottom: 0.25rem;
                }

                /* ç»Ÿè®¡ä¿¡æ¯ç§»åŠ¨ç«¯ä¼˜åŒ– */
                .ranking-modal-item + .mb-4 .text-light\/70 {
                    font-size: 0.875rem;
                }

                .ranking-modal-item + .mb-4 .text-yellow-300 {
                    font-size: 1rem;
                    font-weight: 600;
                }

                /* è§¦æ‘¸äº¤äº’ä¼˜åŒ– - å¢åŠ ç‚¹å‡»åŒºåŸŸ */
                #ranking-modal-close {
                    padding: 0.5rem;
                    margin: -0.5rem;
                }

                /* å‰3åçš‡å† å›¾æ ‡ç§»åŠ¨ç«¯ä¼˜åŒ– */
                .ranking-modal-item .text-xl {
                    font-size: 1.25rem;
                }

                /* ä¼˜åŒ–roleç§°å·æ–‡å­—åœ¨ç§»åŠ¨ç«¯çš„å¯è¯»æ€§ */
                .ranking-modal-item .text-xs.sm\:text-sm {
                    font-size: 0.8125rem !important; /* ä»é»˜è®¤çš„0.75remå¢åŠ åˆ°0.8125rem */
                    line-height: 1.2;
                }
            }

            @media (max-width: 480px) {
                /* æå°å±å¹•çš„é¢å¤–ä¼˜åŒ– */
                #ranking-modal .bg-darker.rounded-2xl {
                    border-radius: 0.75rem;
                }

                .ranking-modal-item {
                    padding: 0.5rem;
                }

                /* æå°å±å¹•ä¸Šè¿›ä¸€æ­¥ä¼˜åŒ–roleæ–‡å­— */
                .ranking-modal-item .text-xs.sm\:text-sm {
                    font-size: 0.75rem !important; /* åœ¨æå°å±å¹•ä¸Šä¿æŒ0.75remä½†ä¼˜åŒ–è¡Œé«˜ */
                    line-height: 1.1;
                }

                .ranking-modal-item .flex-shrink-0.w-14.h-14 {
                    width: 2.5rem;
                    height: 2.5rem;
                }
            }
        }
    </style>
</head>
<body class="bg-dark text-light antialiased">
    <!-- å¯¼èˆªæ  -->
    <nav class="fixed w-full z-50 bg-darker/80 backdrop-blur-md border-b border-primary/20">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <img src="./logo.png" style="width: 32px;">
                <span class="text-xl font-bold text-white">DOG</span>
            </div>

            <div class="flex items-center space-x-4">
                <!-- è¯­è¨€åˆ‡æ¢ä¸‹æ‹‰èœå• -->
                <div class="relative">
                    <button id="lang-dropdown-btn" class="flex items-center text-secondary font-medium hover:text-white transition-colors">
                        <span id="current-lang">ä¸­æ–‡</span>
                        <i class="fa fa-chevron-down ml-1 text-xs"></i>
                    </button>
                    <div id="lang-dropdown" class="absolute top-full left-0 mt-1 bg-dark/95 backdrop-blur-sm border border-primary/20 rounded-lg shadow-lg py-1 min-w-[80px] hidden z-50">
                        <button id="lang-zh" class="block w-full text-left px-3 py-2 text-sm text-secondary hover:bg-primary/10 hover:text-white transition-colors">ä¸­æ–‡</button>
                        <button id="lang-en" class="block w-full text-left px-3 py-2 text-sm text-light/60 hover:bg-primary/10 hover:text-white transition-colors">English</button>
                    </div>
                </div>

                <!-- æ’è¡Œæ¦œæŒ‰é’® -->
                <button id="ranking-btn" class="text-light/60 hover:text-secondary transition-colors">
                    <i class="fa fa-trophy mr-1"></i><span class="zh">æ’è¡Œæ¦œ</span><span class="en hidden">Ranking</span>
                </button>

                <a href="./index.html" class="text-light/60 hover:text-secondary transition-colors">
                    <i class="fa fa-home mr-1"></i><span class="zh">ä¸»é¡µ</span><span class="en hidden">Home</span>
                </a>
            </div>
        </div>
    </nav>

    <div class="pt-24 pb-2 bg-grid relative">
        <div class="absolute inset-0 bg-gradient-to-b from-primary/5 to-darker"></div>
        <div class="container mx-auto px-4 relative z-10">
            <div class="max-w-4xl mx-auto">
                <div class="text-center mb-8">
                    <h1 class="text-[clamp(2rem,5vw,3rem)] font-bold mb-4">
                        <span class="zh bg-gradient-to-r from-primary to-secondary text-gradient">æ·±åº¦å…±è¯†è€…å…¬ç¤º</span>
                        <span class="en hidden bg-gradient-to-r from-primary to-secondary text-gradient">Deep Consensus Monitor</span>
                    </h1>
                    <p class="text-light/70 max-w-2xl mx-auto zh">
                        æ·±åº¦å…±è¯†è€…è‡ªæ„¿å…¬ç¤ºåœ°å€ï¼Œæ¥å—æŸ¥è¯¢æŒä»“å˜åŒ–
                    </p>
                    <p class="text-light/70 max-w-2xl mx-auto en hidden">
                        Deep consensus participants voluntarily display their addresses for DOG token balance monitoring, keeping track of changes in real-time.
                    </p>
                    <p class="text-light/70 max-w-2xl mx-auto zh">
                        ï¼ˆè°ƒç”¨okxå®˜æ–¹æ¥å£ï¼Œæ¯10åˆ†é’ŸæŸ¥è¯¢ä¸€æ¬¡ï¼‰
                    </p>
                    <p class="text-light/70 max-w-2xl mx-auto en hidden">
                        (Calling OKX official API, updated every 10 minutes.)
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ç”¨æˆ·æŒä»“ç›‘æ§ -->
    <section class="py-4 bg-dark">
        <div class="container mx-auto px-4">
            <div class="max-w-6xl mx-auto">
                <div class="bg-darker rounded-2xl p-6 border border-primary/20">
                    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-dark/50 rounded-lg p-4 border border-primary/10">
                            <div class="text-sm text-light/60 mb-1 zh">ä¸Šæ¬¡æ›´æ–°æ—¶é—´ (UTC+8)</div>
                            <div class="text-sm text-light/60 mb-1 en hidden">Last Update (UTC+8)</div>
                            <div class="text-lg font-bold text-white" id="last-update-time">-</div>
                        </div>
                        <div class="bg-dark/50 rounded-lg p-4 border border-primary/10">
                            <div class="text-sm text-light/60 mb-1 zh">æ·±åº¦å…±è¯†è€…æ€»äººæ•°</div>
                            <div class="text-sm text-light/60 mb-1 en hidden">Total Deep Consensus Participants</div>
                            <div class="text-lg font-bold text-secondary" id="total-users">-</div>
                        </div>
                        <div class="bg-dark/50 rounded-lg p-4 border border-primary/10">
                            <div class="text-sm text-light/60 mb-1 zh">æ·±åº¦å…±è¯†è€…æ€»æŒä»“ï¼ˆåŒ…æ‹¬æ± å­ï¼‰</div>
                            <div class="text-sm text-light/60 mb-1 en hidden">Total Deep Consensus Balance</div>
                            <div class="text-lg font-bold text-primary" id="total-balance">-</div>
                        </div>
                        <div class="bg-dark/50 rounded-lg p-4 border border-primary/10">
                            <div class="text-sm text-light/60 mb-1 zh">æ·±åº¦å…±è¯†è€…æ€»åŠ æ± å­</div>
                            <div class="text-sm text-light/60 mb-1 en hidden">Total Pool DOG Holdings</div>
                            <div class="text-lg font-bold text-success" id="total-pool-holdings">-</div>
                        </div>
                    </div>

                    <!-- æœç´¢æ¡† -->
                    <div class="mb-6">
                        <div class="relative w-full">
                            <input 
                                type="text" 
                                id="search-input" 
                                placeholder="æœç´¢æ˜µç§°æˆ–åœ°å€" 
                                class="w-full px-12 py-2 bg-dark/50 border border-primary/20 rounded-lg text-light placeholder-light/40 focus:outline-none focus:border-secondary focus:ring-2 focus:ring-secondary/20 transition-all"
                            >
                            <i class="fa fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-light/40"></i>
                            <button 
                                id="search-clear" 
                                class="absolute right-4 top-1/2 transform -translate-y-1/2 text-light/40 hover:text-light hidden"
                                style="display: none;"
                            >
                                <i class="fa fa-times"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Tab åˆ‡æ¢ -->
                    <div class="flex justify-center border-b border-primary/20 mb-6">
                        <button id="tab-large" class="tab-button active px-6 py-3 text-base font-medium transition-colors border-b-2 border-secondary text-secondary">
                            <span class="zh">æŒä»“â‰¥1äº¿</span>
                            <span class="en hidden">Balance â‰¥100M</span>
                            <span id="tab-large-count" class="ml-2 text-sm opacity-70">(0)</span>
                        </button>
                        <button id="tab-small" class="tab-button px-6 py-3 text-base font-medium transition-colors border-b-2 border-transparent text-light/60 hover:text-light">
                            <span class="zh">æŒä»“â‰¥2000ä¸‡</span>
                            <span class="en hidden">Balance â‰¥20M</span>
                            <span id="tab-small-count" class="ml-2 text-sm opacity-70">(0)</span>
                        </button>
                    </div>

                    <!-- æŒä»“â‰¥1äº¿è¡¨æ ¼ -->
                    <div id="table-large" class="table-tab-content">
                        <div class="overflow-x-auto table-container">
                            <table class="w-full text-left min-w-[800px]">
                                <thead>
                                    <tr class="border-b border-primary/20">
                                        <th class="pb-3 text-light/80 font-medium min-w-[100px] w-[120px]">
                                            <span class="zh">æ˜µç§°</span>
                                            <span class="en hidden">Nickname</span>
                                        </th>
                                        <th class="pb-3 text-light/80 font-medium min-w-[120px] w-[150px]">
                                            <span class="zh">é’±åŒ…åœ°å€</span>
                                            <span class="en hidden">Wallet Address</span>
                                        </th>
                                        <th class="pb-3 text-light/80 font-medium min-w-[120px] w-[140px]">
                                            <span class="zh">å½“å‰æŒä»“</span>
                                            <span class="en hidden">Current Balance</span>
                                        </th>
                                        <th class="pb-3 text-light/80 font-medium min-w-[120px] w-[140px] cursor-pointer hover:text-secondary transition-colors sortable-header" data-sort="poolDOGHoldings" data-tab="large">
                                            <div class="flex items-center">
                                                <span>
                                                    <span class="zh">åŠ æ± å­æ•°é‡</span>
                                                    <span class="en hidden">Pool DOG Added Amount</span>
                                                </span>
                                                <div class="sort-icons flex flex-col ml-2">
                                                    <i class="fa fa-chevron-up text-xs opacity-30 sort-up"></i>
                                                    <i class="fa fa-chevron-down text-xs opacity-30 sort-down"></i>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="pb-3 text-light/80 font-medium min-w-[130px] w-[150px] cursor-pointer hover:text-secondary transition-colors sortable-header" data-sort="totalBalance" data-tab="large">
                                            <div class="flex items-center">
                                                <span>
                                                    <span class="zh">å½“å‰æŒä»“åˆè®¡ï¼ˆæŒä»“+æ± å­ï¼‰</span>
                                                    <span class="en hidden">Total Current Balance</span>
                                                </span>
                                                <div class="sort-icons flex flex-col ml-2">
                                                    <i class="fa fa-chevron-up text-xs opacity-30 sort-up"></i>
                                                    <i class="fa fa-chevron-down text-xs opacity-30 sort-down"></i>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="pb-3 text-light/80 font-medium min-w-[100px] w-[120px] cursor-pointer hover:text-secondary transition-colors sortable-header" data-sort="poolRatio" data-tab="large">
                                            <div class="flex items-center">
                                                <span>
                                                    <span class="zh">åŠ æ± å­å æ¯”</span>
                                                    <span class="en hidden">Pool Ratio</span>
                                                </span>
                                                <div class="sort-icons flex flex-col ml-2">
                                                    <i class="fa fa-chevron-up text-xs opacity-30 sort-up"></i>
                                                    <i class="fa fa-chevron-down text-xs opacity-30 sort-down"></i>
                                                </div>
                                            </div>
                                        </th>
                                        <!-- <th class="pb-3 text-light/80 font-medium min-w-[130px] w-[150px] cursor-pointer hover:text-secondary transition-colors sortable-header" data-sort="initialBalanceTotal" data-tab="large">
                                            <div class="flex items-center">
                                                <span>
                                                    <span class="zh">åŠ å…¥æ—¶åˆå§‹æŒä»“</span>
                                                    <span class="en hidden">Initial Balance Total</span>
                                                </span>
                                                <div class="sort-icons flex flex-col ml-2">
                                                    <i class="fa fa-chevron-up text-xs opacity-30 sort-up"></i>
                                                    <i class="fa fa-chevron-down text-xs opacity-30 sort-down"></i>
                                                </div>
                                            </div>
                                        </th> -->
                                        <!-- <th class="pb-3 text-light/80 font-medium min-w-[100px] w-[120px] cursor-pointer hover:text-secondary transition-colors sortable-header" data-sort="percentage" data-tab="large">
                                            <div class="flex items-center">
                                                <span>
                                                    <span class="zh">å˜åŒ–ç™¾åˆ†æ¯”</span>
                                                    <span class="en hidden">Change %</span>
                                                </span>
                                                <div class="sort-icons flex flex-col ml-2">
                                                    <i class="fa fa-chevron-up text-xs opacity-30 sort-up"></i>
                                                    <i class="fa fa-chevron-down text-xs opacity-30 sort-down"></i>
                                                </div>
                                            </div>
                                        </th> -->
                                    </tr>
                                </thead>
                                <tbody id="balance-table-body-large">
                                    <tr>
                                        <td colspan="8" class="text-center text-light/50 py-8">
                                            <i class="fa fa-info-circle text-2xl mb-2"></i>
                                            <p class="zh">æš‚æ— ç”¨æˆ·æ•°æ®</p>
                                            <p class="en hidden">No user data available</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- æŒä»“<1äº¿è¡¨æ ¼ -->
                    <div id="table-small" class="table-tab-content hidden">
                        <div class="overflow-x-auto table-container">
                            <table class="w-full text-left min-w-[800px]">
                                <thead>
                                    <tr class="border-b border-primary/20">
                                        <th class="pb-3 text-light/80 font-medium min-w-[100px] w-[120px]">
                                            <span class="zh">æ˜µç§°</span>
                                            <span class="en hidden">Nickname</span>
                                        </th>
                                        <th class="pb-3 text-light/80 font-medium min-w-[120px] w-[150px]">
                                            <span class="zh">é’±åŒ…åœ°å€</span>
                                            <span class="en hidden">Wallet Address</span>
                                        </th>
                                        <th class="pb-3 text-light/80 font-medium min-w-[120px] w-[140px]">
                                            <span class="zh">å½“å‰æŒä»“</span>
                                            <span class="en hidden">Current Balance</span>
                                        </th>
                                        <th class="pb-3 text-light/80 font-medium min-w-[120px] w-[140px] cursor-pointer hover:text-secondary transition-colors sortable-header" data-sort="poolDOGHoldings" data-tab="small">
                                            <div class="flex items-center">
                                                <span>
                                                    <span class="zh">åŠ æ± å­æ•°é‡</span>
                                                    <span class="en hidden">Added Pool DOG Amount</span>
                                                </span>
                                                <div class="sort-icons flex flex-col ml-2">
                                                    <i class="fa fa-chevron-up text-xs opacity-30 sort-up"></i>
                                                    <i class="fa fa-chevron-down text-xs opacity-30 sort-down"></i>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="pb-3 text-light/80 font-medium min-w-[130px] w-[150px] cursor-pointer hover:text-secondary transition-colors sortable-header" data-sort="totalBalance" data-tab="small">
                                            <div class="flex items-center">
                                                <span>
                                                    <span class="zh">å½“å‰æŒä»“åˆè®¡ï¼ˆæŒä»“+æ± å­ï¼‰</span>
                                                    <span class="en hidden">Total Current Balance (Balance + Pool)</span>
                                                </span>
                                                <div class="sort-icons flex flex-col ml-2">
                                                    <i class="fa fa-chevron-up text-xs opacity-30 sort-up"></i>
                                                    <i class="fa fa-chevron-down text-xs opacity-30 sort-down"></i>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="pb-3 text-light/80 font-medium min-w-[100px] w-[120px] cursor-pointer hover:text-secondary transition-colors sortable-header" data-sort="poolRatio" data-tab="small">
                                            <div class="flex items-center">
                                                <span>
                                                    <span class="zh">åŠ æ± å­å æ¯”</span>
                                                    <span class="en hidden">Pool Ratio</span>
                                                </span>
                                                <div class="sort-icons flex flex-col ml-2">
                                                    <i class="fa fa-chevron-up text-xs opacity-30 sort-up"></i>
                                                    <i class="fa fa-chevron-down text-xs opacity-30 sort-down"></i>
                                                </div>
                                            </div>
                                        </th>
                                        <!-- <th class="pb-3 text-light/80 font-medium min-w-[130px] w-[150px] cursor-pointer hover:text-secondary transition-colors sortable-header" data-sort="initialBalanceTotal" data-tab="small">
                                            <div class="flex items-center">
                                                <span>
                                                    <span class="zh">åŠ å…¥æ—¶åˆå§‹æŒä»“</span>
                                                    <span class="en hidden">Initial Balance Total</span>
                                                </span>
                                                <div class="sort-icons flex flex-col ml-2">
                                                    <i class="fa fa-chevron-up text-xs opacity-30 sort-up"></i>
                                                    <i class="fa fa-chevron-down text-xs opacity-30 sort-down"></i>
                                                </div>
                                            </div>
                                        </th> -->
                                        <!-- <th class="pb-3 text-light/80 font-medium min-w-[100px] w-[120px] cursor-pointer hover:text-secondary transition-colors sortable-header" data-sort="percentage" data-tab="small">
                                            <div class="flex items-center">
                                                <span>
                                                    <span class="zh">å˜åŒ–ç™¾åˆ†æ¯”</span>
                                                    <span class="en hidden">Change %</span>
                                                </span>
                                                <div class="sort-icons flex flex-col ml-2">
                                                    <i class="fa fa-chevron-up text-xs opacity-30 sort-up"></i>
                                                    <i class="fa fa-chevron-down text-xs opacity-30 sort-down"></i>
                                                </div>
                                            </div>
                                        </th> -->
                                    </tr>
                                </thead>
                                <tbody id="balance-table-body-small">
                                    <tr>
                                        <td colspan="8" class="text-center text-light/50 py-8">
                                            <i class="fa fa-info-circle text-2xl mb-2"></i>
                                            <p class="zh">æš‚æ— ç”¨æˆ·æ•°æ®</p>
                                            <p class="en hidden">No user data available</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- é¡µè„š -->
    <footer class="bg-darker border-t border-primary/20 py-8">
        <div class="container mx-auto px-4">
            <div class="text-center text-light/60 text-sm">
                <p class="zh">Â© 2025 DOGä»£å¸æ·±åº¦å…±è¯†è€…å…¬ç¤ºç³»ç»Ÿ. æ•°æ®æ¥æºäºOKX API</p>
                <p class="en hidden">Â© 2025 DOG Token Deep Consensus Monitor. Data sourced from OKX API</p>
            </div>
        </div>
    </footer>


    <script>
        // æ•°æ®æºé…ç½® - ä½¿ç”¨ç›¸å¯¹è·¯å¾„ç›´æ¥å¼•å…¥æ ¹ç›®å½•çš„ balance-data.json
        const GITHUB_DATA_URL = './balance-data.json';

        // DOMå…ƒç´ 
        const balanceTableBodyLarge = document.getElementById('balance-table-body-large');
        const balanceTableBodySmall = document.getElementById('balance-table-body-small');
        const lastUpdateTimeEl = document.getElementById('last-update-time');
        const totalUsersEl = document.getElementById('total-users');
        const totalBalanceEl = document.getElementById('total-balance');
        const tabLargeBtn = document.getElementById('tab-large');
        const tabSmallBtn = document.getElementById('tab-small');
        const tabLargeCount = document.getElementById('tab-large-count');
        const tabSmallCount = document.getElementById('tab-small-count');
        const tableLarge = document.getElementById('table-large');
        const tableSmall = document.getElementById('table-small');
        const searchInput = document.getElementById('search-input');
        const searchClearBtn = document.getElementById('search-clear');

        // å½“å‰æ¿€æ´»çš„ tab
        let currentTab = 'large'; // 'large' æˆ– 'small'

        // æœç´¢å…³é”®è¯
        let searchKeyword = '';

        // æ’åºçŠ¶æ€ç®¡ç†ï¼ˆä¸ºæ¯ä¸ª tab ç‹¬ç«‹ç»´æŠ¤ï¼‰
        let sortState = {
            large: { field: null, order: null },
            small: { field: null, order: null }
        };
        
        // ç”¨æˆ·æ•°æ®åˆ†ç»„
        let usersLarge = []; // æŒä»“â‰¥1äº¿
        let usersSmall = []; // æŒä»“<1äº¿

        // è½¬è´¦æ•°æ®
        let poolTransferData = {}; // åŠ æ± å­DOGæ•°é‡æ•°æ®

        // é¡µé¢åŠ è½½æ—¶è·å–è¡¨æ ¼æ•°æ®
        window.addEventListener('load', () => {
            loadBalanceData();
            initializeSorting();
            initializeTabs();
            initializeSearch();
            initializeRankingModal();
        });

        // åˆå§‹åŒ– Tab åˆ‡æ¢
        function initializeTabs() {
            tabLargeBtn.addEventListener('click', () => switchTab('large'));
            tabSmallBtn.addEventListener('click', () => switchTab('small'));
        }

        // åˆ‡æ¢ Tab
        function switchTab(tab) {
            currentTab = tab;
            
            if (tab === 'large') {
                tabLargeBtn.classList.add('active', 'border-secondary', 'text-secondary');
                tabLargeBtn.classList.remove('border-transparent', 'text-light/60');
                tabSmallBtn.classList.remove('active', 'border-secondary', 'text-secondary');
                tabSmallBtn.classList.add('border-transparent', 'text-light/60');
                tableLarge.classList.remove('hidden');
                tableSmall.classList.add('hidden');
            } else {
                tabSmallBtn.classList.add('active', 'border-secondary', 'text-secondary');
                tabSmallBtn.classList.remove('border-transparent', 'text-light/60');
                tabLargeBtn.classList.remove('active', 'border-secondary', 'text-secondary');
                tabLargeBtn.classList.add('border-transparent', 'text-light/60');
                tableSmall.classList.remove('hidden');
                tableLarge.classList.add('hidden');
            }
            
            // æ›´æ–°æ’åºå›¾æ ‡æ˜¾ç¤º
            updateSortIcons();
            // é‡æ–°æ¸²æŸ“è¡¨æ ¼ï¼ˆåº”ç”¨æœç´¢è¿‡æ»¤ï¼‰
            renderSortedTable(tab);
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStatistics(data) {
            // æ›´æ–°ä¸Šæ¬¡æ›´æ–°æ—¶é—´ (UTC+8)
            if (data.lastUpdate) {
                const timeText = formatTimeToUTC8(data.lastUpdate);
                lastUpdateTimeEl.textContent = timeText;
            }

            // æ›´æ–°å…±è¯†è€…æ€»äººæ•°
            if (data.totalUsers !== undefined) {
                totalUsersEl.textContent = data.totalUsers;
            }

            // è®¡ç®—å¹¶æ›´æ–°å½“å‰æ€»æŒä»“ï¼ˆåŒ…å«æ± å­DOGæŒæœ‰é‡ï¼‰
            if (data.users && data.users.length > 0) {
                const totalBalance = data.users.reduce((sum, user) => {
                    const poolDOGHoldings = user.poolDOGHoldings || 0;
                    return sum + (user.totalBalance || 0) + poolDOGHoldings;
                }, 0);
                totalBalanceEl.textContent = Math.round(totalBalance).toLocaleString();

                // è®¡ç®—å¹¶æ›´æ–°æ€»åŠ æ± å­æ•°é‡
                const totalPoolHoldings = data.users.reduce((sum, user) => {
                    return sum + (user.poolDOGHoldings || 0);
                }, 0);
                document.getElementById('total-pool-holdings').textContent = Math.round(totalPoolHoldings).toLocaleString();
            }
        }

        // å°†æ—¶é—´æ ¼å¼åŒ–ä¸ºUTC+8
        function formatTimeToUTC8(isoString) {
            try {
                const date = new Date(isoString);
                // è½¬æ¢ä¸ºUTC+8
                const utc8Time = new Date(date.getTime());

                // æ ¼å¼åŒ–ä¸ºæœ¬åœ°åŒ–å­—ç¬¦ä¸²
                return utc8Time.toLocaleString('zh-CN', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                });
            } catch (error) {
                console.error('æ—¶é—´æ ¼å¼åŒ–å¤±è´¥:', error);
                return isoString; // è¿”å›åŸå§‹å­—ç¬¦ä¸²ä½œä¸ºfallback
            }
        }

        // åˆå§‹åŒ–æ’è¡Œæ¦œå¼¹çª—
        function initializeRankingModal() {
            const rankingBtn = document.getElementById('ranking-btn');
            const rankingModal = document.getElementById('ranking-modal');
            const rankingModalClose = document.getElementById('ranking-modal-close');

            // æ‰“å¼€å¼¹çª—
            rankingBtn.addEventListener('click', () => {
                rankingModal.classList.remove('hidden');
                renderRankingModal();
            });

            // å…³é—­å¼¹çª—
            rankingModalClose.addEventListener('click', () => {
                rankingModal.classList.add('hidden');
            });

            // ç‚¹å‡»èƒŒæ™¯å…³é—­å¼¹çª—
            rankingModal.addEventListener('click', (e) => {
                if (e.target === rankingModal) {
                    rankingModal.classList.add('hidden');
                }
            });

            // ESCé”®å…³é—­å¼¹çª—
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && !rankingModal.classList.contains('hidden')) {
                    rankingModal.classList.add('hidden');
                }
            });
        }

        // æ¸²æŸ“æ’è¡Œæ¦œå¼¹çª—å†…å®¹
        function renderRankingModal() {
            const modalContent = document.getElementById('ranking-modal-content');

            // æ£€æŸ¥æ˜¯å¦æœ‰ç”¨æˆ·æ•°æ®
            if (!usersLarge || usersLarge.length === 0) {
                modalContent.innerHTML = `
                    <div class="text-center text-light/50 py-12">
                        <i class="fa fa-info-circle text-4xl mb-4"></i>
                        <p class="text-lg zh">æš‚æ— ç”¨æˆ·æ•°æ®</p>
                        <p class="text-lg en hidden">No user data available</p>
                        <p class="text-sm mt-2 zh">è¯·ç¨ååˆ·æ–°é¡µé¢é‡è¯•</p>
                        <p class="text-sm mt-2 en hidden">Please refresh the page later</p>
                    </div>
                `;
                return;
            }

            // å°†æ± å­DOGæŒæœ‰é‡æ•°æ®è½¬æ¢ä¸ºæ•°ç»„å¹¶æ’åº
            const rankingData = [...usersLarge, ...usersSmall]
                .filter(user => (user.poolDOGHoldings || 0) > 0) // åªæ˜¾ç¤ºæœ‰æ± å­æŒæœ‰é‡çš„ç”¨æˆ·
                .map(user => ({
                    nickname: user.nickname,
                    amount: user.poolDOGHoldings || 0
                }))
                .sort((a, b) => b.amount - a.amount); // æŒ‰æŒæœ‰é‡é™åºæ’åº

            // ç”Ÿæˆæ’è¡Œæ¦œHTML
            const rankingHtml = rankingData.map((item, index) => {
                const rank = index + 1;
                const isTopThree = rank <= 3;
                const isTopTen = rank <= 10;

                // æ ¹æ®æ’åè®¾ç½®ä¸åŒçš„æ ·å¼
                let rankClass = 'text-light/60';
                let bgClass = 'bg-dark/20';
                let borderClass = 'border-primary/10';
                let role = "æ± å­è´¡çŒ®è€…";

                if (rank === 1) {
                    rankClass = 'text-yellow-400';
                    bgClass = 'bg-gradient-to-br from-yellow-400/30 via-orange-400/25 to-red-400/20 shadow-yellow-400/50';
                    borderClass = 'border-yellow-400/50 shadow-lg shadow-yellow-400/20';
                    role = "æ— æ•Œæ ¼å±€æ¦œä¸€å¤§å“¥";
                } else if (rank === 2) {
                    rankClass = 'text-gray-200';
                    bgClass = 'bg-gradient-to-br from-gray-200/40 via-slate-300/35 to-zinc-400/30 shadow-gray-200/70 shadow-lg';
                    borderClass = 'border-gray-200/60 shadow-lg shadow-gray-200/30';
                    role = "æ¦œäºŒå·¨ä½¬";
                } else if (rank === 3) {
                    rankClass = 'text-amber-600';
                    bgClass = 'bg-gradient-to-br from-amber-600/20 via-orange-700/15 to-red-800/10 shadow-amber-600/30';
                    borderClass = 'border-amber-600/30 shadow-md shadow-amber-600/15';
                    role = "æ¦œä¸‰å¤§ä½¬";
                } else if (isTopTen) {
                    rankClass = 'text-secondary';
                    bgClass = 'bg-gradient-to-r from-secondary/15 to-primary/15';
                    borderClass = 'border-secondary/25';
                    role = "å“è¶Šå‰å";
                } else {
                    rankClass = 'text-light/70';
                    bgClass = 'bg-dark/10';
                    borderClass = 'border-primary/5';
                }

                return `
                    <div class="ranking-modal-item ${bgClass} p-4 border ${borderClass} rounded-xl relative overflow-hidden">
                        ${isTopThree ? `<div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent"></div>` : ''}
                        <div class="flex items-center justify-between relative z-10">
                            <div class="flex items-center flex-1 min-w-0">
                                <!-- æ’åæ•°å­— -->
                                <div class="flex-shrink-0 w-12 h-12 sm:w-14 sm:h-14 rounded-full ${rank === 1 ? 'bg-gradient-to-br from-yellow-400 to-orange-500 shadow-lg shadow-yellow-400/50' : rank === 2 ? 'bg-gradient-to-br from-gray-300 to-slate-400 shadow-lg shadow-gray-300/50' : rank === 3 ? 'bg-gradient-to-br from-orange-400 to-amber-500 shadow-lg shadow-orange-400/50' : 'bg-primary/10'} flex items-center justify-center mr-3 sm:mr-4">
                                    <span class="text-xl sm:text-2xl font-bold ${rankClass} ${isTopThree ? 'drop-shadow-lg' : ''}">${rank === 1 ? 'ğŸ¥‡' : rank === 2 ? 'ğŸ¥ˆ' : rank === 3 ? 'ğŸ¥‰' : rank}</span>
                                </div>

                                <!-- ç”¨æˆ·ä¿¡æ¯ -->
                                <div class="flex-1 min-w-0">
                                    <div class="font-semibold text-white text-base sm:text-lg ${isTopThree ? 'drop-shadow-sm' : ''} truncate">${item.nickname}</div>
                                    <div class="text-xs sm:text-sm ${isTopThree ? 'text-yellow-300 font-medium' : 'text-light/60'} zh truncate">${role}</div>
                                    <div class="text-xs sm:text-sm ${isTopThree ? 'text-yellow-300 font-medium' : 'text-light/60'} en hidden truncate">${role}</div>
                                </div>
                            </div>

                            <!-- è´¡çŒ®é‡‘é¢ -->
                            <div class="text-right flex-shrink-0 ml-2">
                                <div class="text-lg sm:text-sm font-bold ${isTopThree ? 'text-yellow-300 drop-shadow-lg' : 'text-white'} font-mono mb-1">
                                    ${Math.round(item.amount).toLocaleString()}
                                </div>
                                <div class="text-xs sm:text-sm ${isTopThree ? 'text-yellow-200' : 'text-secondary'} font-medium">DOG</div>
                                ${rank <= 10 && !isTopThree ? '<div class="text-xs text-light/50 mt-1">TOP 10</div>' : ''}
                                ${isTopThree ? '<div class="text-xs text-yellow-300 mt-1 font-bold">â­ ä¼ å¥‡è´¡çŒ®è€… â­</div>' : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            modalContent.innerHTML = `
                <div class="mb-4 text-center">
                    <p class="text-light/70 zh">å…± ${rankingData.length} ä½è´¡çŒ®è€…</p>
                    <p class="text-light/70 en hidden">Total ${rankingData.length} contributors</p>
                </div>
                <div class="mb-4 text-center">
                    <p class="text-light/70 zh">æ€»è´¡çŒ®é‡ï¼š<span class="text-yellow-300">${Math.round(rankingData.reduce((sum, item) => sum + item.amount, 0)).toLocaleString()} DOG</span></p>
                    <p class="text-light/70 en hidden">Total contribution: <span class="text-yellow-300">${Math.round(rankingData.reduce((sum, item) => sum + item.amount, 0)).toLocaleString()} DOG</span></p>
                </div>
                <div class="space-y-1">
                    ${rankingHtml}
                </div>
            `;
        }

        // åˆå§‹åŒ–æ’åºåŠŸèƒ½
        function initializeSorting() {
            // ä¸ºæ‰€æœ‰å¯æ’åºçš„è¡¨å¤´æ·»åŠ ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.sortable-header').forEach(header => {
                header.addEventListener('click', () => {
                    const sortField = header.dataset.sort;
                    const tab = header.dataset.tab;
                    handleSort(sortField, tab);
                });
            });
        }

        // å¤„ç†æ’åº
        function handleSort(field, tab) {
            const state = sortState[tab];
            
            // å¦‚æœç‚¹å‡»çš„æ˜¯å½“å‰æ’åºå­—æ®µï¼Œåˆ™å¾ªç¯æ’åºé¡ºåº
            if (state.field === field) {
                // å¾ªç¯: æ— åº -> å€’åº -> æ­£åº -> æ— åº
                if (state.order === null) {
                    state.order = 'desc';
                } else if (state.order === 'desc') {
                    state.order = 'asc';
                } else {
                    state.order = null;
                    state.field = null;
                }
            } else {
                // ç‚¹å‡»æ–°å­—æ®µï¼Œå¼€å§‹å€’åºæ’åºï¼ˆå¤§å€¼åœ¨å‰ï¼‰
                state.field = field;
                state.order = 'desc';
            }

            // æ›´æ–°UI
            updateSortIcons();

            // é‡æ–°æ¸²æŸ“å½“å‰ tab çš„è¡¨æ ¼
            renderSortedTable(tab);
        }

        // æ›´æ–°æ’åºå›¾æ ‡æ˜¾ç¤º
        function updateSortIcons() {
            // é‡ç½®æ‰€æœ‰å›¾æ ‡
            document.querySelectorAll('.sort-up, .sort-down').forEach(icon => {
                icon.classList.add('opacity-30');
                icon.classList.remove('text-secondary');
            });

            // æ›´æ–°å½“å‰ tab çš„æ’åºå›¾æ ‡
            const state = sortState[currentTab];
            if (state.field && state.order) {
                const currentHeader = document.querySelector(`[data-sort="${state.field}"][data-tab="${currentTab}"]`);
                if (currentHeader) {
                    const iconClass = state.order === 'asc' ? '.sort-up' : '.sort-down';
                    const icon = currentHeader.querySelector(iconClass);
                    if (icon) {
                        icon.classList.remove('opacity-30');
                        icon.classList.add('text-secondary');
                    }
                }
            }
        }

        // æ¸²æŸ“æ’åºåçš„è¡¨æ ¼
        function renderSortedTable(tab = currentTab) {
            const state = sortState[tab];
            // è·å–æ‰€æœ‰ç”¨æˆ·ï¼Œç„¶ååŸºäºè°ƒæ•´åçš„æŒä»“åˆè®¡é‡æ–°åˆ†ç»„
            let allUsers = [...usersLarge, ...usersSmall];
            const threshold = 100000000; // 1äº¿

            // é‡æ–°è®¡ç®—æ¯ä¸ªç”¨æˆ·çš„è°ƒæ•´åä½™é¢
            allUsers.forEach(user => {
                const poolDOGHoldings = user.poolDOGHoldings || 0;
                user.adjustedTotalBalance = user.totalBalance + poolDOGHoldings;
            });

            // åŸºäºè°ƒæ•´åçš„ä½™é¢é‡æ–°åˆ†ç»„
            let usersToRender;
            let largeCount = 0;
            let smallCount = 0;

            allUsers.forEach(user => {
                if (user.adjustedTotalBalance >= threshold) {
                    largeCount++;
                } else {
                    smallCount++;
                }
            });

            if (tab === 'large') {
                usersToRender = allUsers.filter(user => user.adjustedTotalBalance >= threshold);
            } else {
                usersToRender = allUsers.filter(user => user.adjustedTotalBalance < threshold);
            }

            // æ›´æ–°Tabè®¡æ•°
            tabLargeCount.textContent = `(${largeCount})`;
            tabSmallCount.textContent = `(${smallCount})`;

            // å¦‚æœæœ‰æœç´¢å…³é”®è¯ï¼Œå…ˆè¿‡æ»¤
            if (searchKeyword.trim()) {
                const results = searchUsers(searchKeyword);
                usersToRender = tab === 'large' ? results.large : results.small;
            }

            // å¦‚æœæœç´¢åæ²¡æœ‰ç»“æœï¼Œæ£€æŸ¥å¦ä¸€ä¸ªTabæ˜¯å¦æœ‰ç»“æœ
            if (searchKeyword.trim() && usersToRender.length === 0) {
                const results = searchUsers(searchKeyword);
                const otherTabHasResults = (tab === 'large' && results.small.length > 0) || 
                                         (tab === 'small' && results.large.length > 0);
                
                let emptyHtml;
                if (otherTabHasResults) {
                    // å¦ä¸€ä¸ªTabæœ‰ç»“æœï¼Œæ˜¾ç¤ºæç¤ºä¿¡æ¯
                    const otherTabName = tab === 'large' ? 'æŒä»“â‰¥2000ä¸‡' : 'æŒä»“â‰¥1äº¿';
                    const otherTabNameEn = tab === 'large' ? 'Balance â‰¥20M' : 'Balance â‰¥100M';
                    emptyHtml = `
                        <tr>
                            <td colspan="7" class="text-center text-light/50 py-8">
                                <i class="fa fa-info-circle text-2xl mb-2"></i>
                                <p class="zh">å½“å‰Tabæœªæ‰¾åˆ°ç»“æœï¼Œè¯·åˆ‡æ¢åˆ°"<span class="text-secondary">${otherTabName}</span>"TabæŸ¥çœ‹</p>
                                <p class="en hidden">No results in current tab, please switch to "<span class="text-secondary">${otherTabNameEn}</span>" tab</p>
                            </td>
                        </tr>
                    `;
                } else {
                    // ä¸¤ä¸ªTabéƒ½æ²¡æœ‰ç»“æœ
                    emptyHtml = `
                        <tr>
                            <td colspan="7" class="text-center text-light/50 py-8">
                                <i class="fa fa-info-circle text-2xl mb-2"></i>
                                <p class="zh">è¯¥æ˜µç§°æˆ–åœ°å€ä¸åœ¨å…¬ç¤ºåå•</p>
                                <p class="en hidden">This nickname or address is not in the public list</p>
                            </td>
                        </tr>
                    `;
                }
                
                if (tab === 'large') {
                    balanceTableBodyLarge.innerHTML = emptyHtml;
                } else {
                    balanceTableBodySmall.innerHTML = emptyHtml;
                }
                return;
            }

            // æ›´æ–°æ¯ä¸ªç”¨æˆ·çš„ç™¾åˆ†æ¯”å’Œæ± å­æŒæœ‰é‡ï¼ˆåŸºäºè°ƒæ•´åçš„æŒä»“åˆè®¡ï¼‰
            usersToRender.forEach(user => {
                const poolDOGHoldings = user.poolDOGHoldings || 0;
                const adjustedTotalBalance = user.totalBalance + poolDOGHoldings;

                if (user.initialBalanceTotal > 0) {
                    user.adjustedPercentage = ((adjustedTotalBalance - user.initialBalanceTotal) / user.initialBalanceTotal) * 100;
                } else {
                    user.adjustedPercentage = 0;
                }
            });

            // å¦‚æœæœ‰æ’åºï¼Œåº”ç”¨æ’åº
            if (state.field && state.order) {
                usersToRender.sort((a, b) => {
                    let aValue, bValue;

                    // ç‰¹æ®Šå¤„ç†ç™¾åˆ†æ¯”å­—æ®µï¼Œä½¿ç”¨è°ƒæ•´åçš„ç™¾åˆ†æ¯”
                    if (state.field === 'percentage') {
                        aValue = a.adjustedPercentage || 0;
                        bValue = b.adjustedPercentage || 0;
                    } else if (state.field === 'totalBalance') {
                        // å½“å‰æŒä»“åˆè®¡åˆ—ï¼šä½¿ç”¨åŒ…å«æ± å­DOGçš„æ€»æŒä»“
                        const poolDOGHoldingsA = a.poolDOGHoldings || 0;
                        const poolDOGHoldingsB = b.poolDOGHoldings || 0;
                        aValue = (a.totalBalance || 0) + poolDOGHoldingsA;
                        bValue = (b.totalBalance || 0) + poolDOGHoldingsB;
                    } else if (state.field === 'poolRatio') {
                        // æ± å­å æ¯”ï¼šåŠ æ± å­æ•°é‡ / æ€»æŒä»“ * 100
                        const poolDOGHoldingsA = a.poolDOGHoldings || 0;
                        const poolDOGHoldingsB = b.poolDOGHoldings || 0;
                        const totalBalanceA = (a.totalBalance || 0) + poolDOGHoldingsA;
                        const totalBalanceB = (b.totalBalance || 0) + poolDOGHoldingsB;
                        aValue = totalBalanceA > 0 ? (poolDOGHoldingsA / totalBalanceA) * 100 : 0;
                        bValue = totalBalanceB > 0 ? (poolDOGHoldingsB / totalBalanceB) * 100 : 0;
                    } else {
                        aValue = a[state.field];
                        bValue = b[state.field];

                        // ç¡®ä¿æ•°å€¼æ¯”è¾ƒ
                        if (typeof aValue === 'string') aValue = parseFloat(aValue) || 0;
                        if (typeof bValue === 'string') bValue = parseFloat(bValue) || 0;
                    }

                    if (state.order === 'asc') {
                        return aValue - bValue;
                    } else {
                        return bValue - aValue;
                    }
                });
            }

            // æ¸²æŸ“å¯¹åº”è¡¨æ ¼
            if (tab === 'large') {
                balanceTableBodyLarge.innerHTML = renderTableHTML(usersToRender);
            } else {
                balanceTableBodySmall.innerHTML = renderTableHTML(usersToRender);
            }
        }

        // æœç´¢ç”¨æˆ·ï¼ˆè·¨Tabæœç´¢ï¼‰
        function searchUsers(keyword) {
            if (!keyword.trim()) {
                return { large: [], small: [] };
            }

            const searchKeyword = keyword.trim().toLowerCase();
            const filterUser = (user) => {
                // æœç´¢æ˜µç§°
                const nicknameMatch = user.nickname && user.nickname.toLowerCase().includes(searchKeyword);
                // æœç´¢åœ°å€ï¼ˆåªæœç´¢addressesæ•°ç»„ï¼Œä¸æœç´¢privateAddressesï¼‰
                const addressMatch = user.addresses && user.addresses.some(addr =>
                    addr && addr.toLowerCase().includes(searchKeyword)
                );
                return nicknameMatch || addressMatch;
            };

            return {
                large: usersLarge.filter(filterUser),
                small: usersSmall.filter(filterUser)
            };
        }

        // åˆå§‹åŒ–æœç´¢åŠŸèƒ½
        function initializeSearch() {
            // æœç´¢è¾“å…¥äº‹ä»¶
            searchInput.addEventListener('input', (e) => {
                searchKeyword = e.target.value;
                // æ˜¾ç¤º/éšè—æ¸…é™¤æŒ‰é’®
                if (searchKeyword.trim()) {
                    searchClearBtn.style.display = 'block';
                } else {
                    searchClearBtn.style.display = 'none';
                }
                
                // æ‰§è¡Œæœç´¢å¹¶è‡ªåŠ¨åˆ‡æ¢Tab
                performSearch();
            });

            // æ¸…é™¤æœç´¢
            searchClearBtn.addEventListener('click', () => {
                searchInput.value = '';
                searchKeyword = '';
                searchClearBtn.style.display = 'none';
                renderSortedTable();
            });

            // å›è½¦æœç´¢
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    performSearch();
                }
            });
        }

        // æ‰§è¡Œæœç´¢å¹¶è‡ªåŠ¨åˆ‡æ¢Tab
        function performSearch() {
            if (!searchKeyword.trim()) {
                renderSortedTable();
                return;
            }

            const results = searchUsers(searchKeyword);
            const hasLargeResults = results.large.length > 0;
            const hasSmallResults = results.small.length > 0;

            // å¦‚æœä¸¤ä¸ªTabéƒ½æ²¡æœ‰ç»“æœ
            if (!hasLargeResults && !hasSmallResults) {
                renderSortedTable();
                return;
            }

            // å¦‚æœå½“å‰Tabæœ‰ç»“æœï¼Œä¿æŒå½“å‰Tab
            if ((currentTab === 'large' && hasLargeResults) || (currentTab === 'small' && hasSmallResults)) {
                renderSortedTable();
                return;
            }

            // å¦‚æœå½“å‰Tabæ²¡æœ‰ç»“æœï¼Œä½†å¦ä¸€ä¸ªTabæœ‰ç»“æœï¼Œè‡ªåŠ¨åˆ‡æ¢
            if (currentTab === 'large' && !hasLargeResults && hasSmallResults) {
                switchTab('small');
            } else if (currentTab === 'small' && !hasSmallResults && hasLargeResults) {
                switchTab('large');
            } else {
                // å¦‚æœä¸¤ä¸ªTabéƒ½æœ‰ç»“æœï¼Œä¼˜å…ˆæ˜¾ç¤ºå½“å‰Tab
                renderSortedTable();
            }
        }

        // è¯­è¨€åˆ‡æ¢ä¸‹æ‹‰èœå•åŠŸèƒ½
        const langDropdownBtn = document.getElementById('lang-dropdown-btn');
        const langDropdown = document.getElementById('lang-dropdown');
        const currentLangSpan = document.getElementById('current-lang');

        // åˆ‡æ¢ä¸‹æ‹‰èœå•æ˜¾ç¤º/éšè—
        langDropdownBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            langDropdown.classList.toggle('hidden');
        });

        // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­ä¸‹æ‹‰èœå•
        document.addEventListener('click', function() {
            langDropdown.classList.add('hidden');
        });

        // ä¸­æ–‡åˆ‡æ¢
        document.getElementById('lang-zh').addEventListener('click', function() {
            document.querySelectorAll('.zh').forEach(el => el.classList.remove('hidden'));
            document.querySelectorAll('.en').forEach(el => el.classList.add('hidden'));
            document.documentElement.lang = 'zh-CN';
            currentLangSpan.textContent = 'ä¸­æ–‡';
            langDropdown.classList.add('hidden');
            // æ›´æ–°æœç´¢æ¡†placeholder
            searchInput.placeholder = 'æœç´¢æ˜µç§°æˆ–åœ°å€';
        });

        // è‹±æ–‡åˆ‡æ¢
        document.getElementById('lang-en').addEventListener('click', function() {
            document.querySelectorAll('.en').forEach(el => el.classList.remove('hidden'));
            document.querySelectorAll('.zh').forEach(el => el.classList.add('hidden'));
            document.documentElement.lang = 'en';
            currentLangSpan.textContent = 'English';
            langDropdown.classList.add('hidden');
            // æ›´æ–°æœç´¢æ¡†placeholder
            searchInput.placeholder = 'Search nickname or address';
        });

        // å¤„ç†APIå“åº”çš„å‡½æ•°
        function handleApiResponse(responseText) {
            try {
                const response = JSON.parse(responseText);

                if (response.success && response.data) {
                    const allUsers = response.data.users;
                    const threshold = 100000000; // 1äº¿

                    // å°†ç”¨æˆ·æ•°æ®åˆ†æˆä¸¤ç»„ï¼ˆåŸºäºåŒ…å«æ± å­DOGçš„æ€»æŒä»“ï¼‰
                    // åˆå¹¶addresseså’ŒprivateAddressesç”¨äºç»Ÿè®¡è®¡ç®—
                    allUsers.forEach(user => {
                        user.allAddresses = [...(user.addresses || []), ...(user.privateAddresses || [])];
                    });

                    usersLarge = allUsers.filter(user => {
                        const totalWithPool = (user.totalBalance || 0) + (user.poolDOGHoldings || 0);
                        return totalWithPool >= threshold;
                    });
                    usersSmall = allUsers.filter(user => {
                        const totalWithPool = (user.totalBalance || 0) + (user.poolDOGHoldings || 0);
                        return totalWithPool < threshold;
                    });

                    // æ›´æ–° tab è®¡æ•°ï¼ˆåŸºäºæ–°çš„åˆ†ç»„é€»è¾‘ï¼‰
                    tabLargeCount.textContent = `(${usersLarge.length})`;
                    tabSmallCount.textContent = `(${usersSmall.length})`;

                    // é‡ç½®æ’åºçŠ¶æ€ï¼ˆæ–°æ•°æ®åˆ°æ¥æ—¶ï¼‰
                    sortState.large = { field: null, order: null };
                    sortState.small = { field: null, order: null };
                    updateSortIcons();

                    // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
                    updateStatistics(response.data);

                    // æ¸²æŸ“ä¸¤ä¸ªè¡¨æ ¼
                    renderSortedTable('large');
                    renderSortedTable('small');

                    console.log(`æŒä»“æ•°æ®å·²åŠ è½½ï¼Œæœ€åæ›´æ–°æ—¶é—´: ${response.data.lastUpdate}`);
                    console.log(`æŒä»“â‰¥1äº¿: ${usersLarge.length}äººï¼ŒæŒä»“<1äº¿: ${usersSmall.length}äºº`);
                } else {
                    throw new Error('åç«¯APIè¿”å›æ•°æ®æ ¼å¼é”™è¯¯');
                }
            } catch (error) {
                console.error('å¤„ç†æŒä»“æ•°æ®å¤±è´¥:', error);
                const errorHtml = `
                    <tr>
                        <td colspan="7" class="text-center text-red-400 py-8">
                            <i class="fa fa-exclamation-triangle text-2xl mb-2"></i>
                            <p class="zh">åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ</p>
                            <p class="en hidden">Failed to load data, please check if the backend service is running</p>
                            <p class="text-sm mt-2">${error.message}</p>
                        </td>
                    </tr>
                `;
                balanceTableBodyLarge.innerHTML = errorHtml;
                balanceTableBodySmall.innerHTML = errorHtml;
            }
        }

        // æ‰§è¡Œæ•°æ®è¯·æ±‚çš„é€šç”¨é€»è¾‘ï¼ˆä»æœ¬åœ°æ–‡ä»¶è¯»å–JSONï¼‰
        async function performDataRequest() {
            try {
                // æ·»åŠ æ—¶é—´æˆ³é˜²æ­¢æµè§ˆå™¨ç¼“å­˜
                const url = `${GITHUB_DATA_URL}?t=${Date.now()}`;
                console.log('æ­£åœ¨åŠ è½½æ•°æ®:', url);
                
                const response = await fetch(url);

                if (!response.ok) {
                    if (response.status === 404) {
                        throw new Error('æ•°æ®æ–‡ä»¶æœªæ‰¾åˆ°ï¼Œè¯·ç¡®è®¤ balance-data.json æ–‡ä»¶æ˜¯å¦å­˜åœ¨');
                    }
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const jsonData = await response.json();
                
                // éªŒè¯æ•°æ®æ ¼å¼
                if (!jsonData.success || !jsonData.data) {
                    throw new Error('æ•°æ®æ ¼å¼é”™è¯¯ï¼šç¼ºå°‘ success æˆ– data å­—æ®µ');
                }

                // åŠ è½½æ± å­ç»Ÿè®¡æ•°æ®
                await loadPoolStatsData();

                // å¤„ç†å“åº”æ•°æ®ï¼ˆè½¬æ¢ä¸ºå­—ç¬¦ä¸²æ ¼å¼ä»¥å…¼å®¹ç°æœ‰å¤„ç†å‡½æ•°ï¼‰
                handleApiResponse(JSON.stringify(jsonData));

            } catch (error) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
                
                const errorMessage = error.message || 'æœªçŸ¥é”™è¯¯';
                
                const errorHtml = `
                    <tr>
                        <td colspan="7" class="text-center text-red-400 py-8">
                            <i class="fa fa-exclamation-triangle text-2xl mb-2"></i>
                            <p class="zh">åŠ è½½æ•°æ®å¤±è´¥</p>
                            <p class="en hidden">Failed to load data</p>
                            <p class="text-sm mt-2">${errorMessage}</p>
                            <p class="text-xs mt-2 text-light/50 zh">æç¤ºï¼šè¯·ç¡®è®¤ balance-data.json æ–‡ä»¶åœ¨æ ¹ç›®å½•ä¸‹</p>
                            <p class="text-xs mt-2 text-light/50 en hidden">Tip: Please ensure balance-data.json exists in the root directory</p>
                        </td>
                    </tr>
                `;
                balanceTableBodyLarge.innerHTML = errorHtml;
                balanceTableBodySmall.innerHTML = errorHtml;
            }
        }

        // åŠ è½½æ± å­ç»Ÿè®¡æ•°æ®ï¼ˆç°åœ¨é›†æˆåœ¨balance-data.jsonä¸­ï¼‰
        async function loadPoolStatsData() {
            try {
                console.log('æ­£åœ¨åŠ è½½æ± å­ç»Ÿè®¡æ•°æ®...');

                // æ± å­ç»Ÿè®¡æ•°æ®ç°åœ¨åœ¨balance-data.jsonä¸­ï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®ä¸ºç©ºå¯¹è±¡
                // å®é™…çš„æ± å­ç»Ÿè®¡ä¿¡æ¯ä¼šä»balance-data.jsonçš„poolStatså­—æ®µè·å–
                poolTransferData = {};

                console.log('æ± å­ç»Ÿè®¡æ•°æ®åˆå§‹åŒ–å®Œæˆ');

                // é‡æ–°æ¸²æŸ“è¡¨æ ¼ä»¥åº”ç”¨æ–°çš„åˆ†ç»„é€»è¾‘
                renderSortedTable('large');
                renderSortedTable('small');
            } catch (error) {
                console.warn('åˆå§‹åŒ–æ± å­ç»Ÿè®¡æ•°æ®å¤±è´¥:', error);
                poolTransferData = {};
            }
        }

        async function loadBalanceData() {
            console.log('å¼€å§‹åŠ è½½æŒä»“æ•°æ®...');

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            const loadingHtml = `
                <tr>
                    <td colspan="7" class="text-center text-light/50 py-8">
                        <i class="fa fa-spinner fa-spin text-primary text-2xl mb-2"></i>
                        <p class="zh">æ­£åœ¨åŠ è½½æ•°æ®...</p>
                        <p class="en hidden">Loading data...</p>
                    </td>
                </tr>
            `;
            balanceTableBodyLarge.innerHTML = loadingHtml;
            balanceTableBodySmall.innerHTML = loadingHtml;

            await performDataRequest();
        }

        function renderTableHTML(users) {
            if (!users || users.length === 0) {
                return `
                    <tr>
                        <td colspan="7" class="text-center text-light/50 py-8">
                            <i class="fa fa-info-circle text-2xl mb-2"></i>
                            <p class="zh">æš‚æ— ç”¨æˆ·æ•°æ®</p>
                            <p class="en hidden">No user data available</p>
                        </td>
                    </tr>
                `;
            }

            let tableHtml = '';

            users.forEach((user) => {
                // åœ°å€åˆ—è¡¨HTML
                const addressesHtml = user.addresses.map((address, index) => {
                    const shortAddress = `${address.slice(0, 6)}...${address.slice(-4)}`;
                    return `
                        <div class="flex items-center mb-1 last:mb-0">
                            <span class="text-light/70 font-mono text-sm">${shortAddress}</span>
                            <button onclick="navigator.clipboard.writeText('${address}')" class="ml-2 text-primary hover:text-secondary flex-shrink-0" title="å¤åˆ¶åœ°å€">
                                <i class="fa fa-copy text-xs"></i>
                            </button>
                        </div>
                    `;
                }).join('');

                // æŒä»“åˆ—è¡¨HTML
                const balancesHtml = user.currentBalances.map((balance) => {
                    return `<div class="text-white font-mono text-sm mb-1 last:mb-0">${Math.round(balance).toLocaleString()}</div>`;
                }).join('');

                // æ± å­DOGæŒæœ‰é‡ï¼ˆä»æ–°çš„æ•°æ®å­—æ®µè·å–ï¼‰
                const poolDOGHoldings = user.poolDOGHoldings || 0;

                // é‡æ–°è®¡ç®—å½“å‰æŒä»“åˆè®¡ï¼ˆåŒ…å«æ± å­ä¸­çš„DOGæ•°é‡ï¼‰
                const adjustedTotalBalance = user.totalBalance + poolDOGHoldings;

                // è®¡ç®—æ± å­å æ¯”
                const poolRatio = adjustedTotalBalance > 0 ? (poolDOGHoldings / adjustedTotalBalance) * 100 : 0;

                // ç™¾åˆ†æ¯”æ ·å¼
                let percentageClass = 'text-light/70';
                let percentageIcon = '';

                if (user.adjustedPercentage > 0) {
                    percentageClass = 'text-success';
                    percentageIcon = '<i class="fa fa-arrow-up mr-1"></i>';
                } else if (user.adjustedPercentage < 0) {
                    percentageClass = 'text-danger';
                    percentageIcon = '<i class="fa fa-arrow-down mr-1"></i>';
                }

                tableHtml += `
                    <tr class="border-b border-primary/10">
                        <td class="py-3 text-white font-medium min-w-[100px] w-[120px] align-middle">${user.nickname}</td>
                        <td class="py-3 text-light/70 min-w-[120px] w-[150px] align-middle">${addressesHtml}</td>
                        <td class="py-3 text-white font-mono min-w-[120px] w-[140px] align-middle">${balancesHtml}</td>
                        <td class="py-3 text-white font-mono min-w-[120px] w-[140px] align-middle">${Math.round(poolDOGHoldings).toLocaleString()}</td>
                        <td class="py-3 text-white font-mono min-w-[130px] w-[150px] align-middle">${Math.round(adjustedTotalBalance).toLocaleString()}</td>
                        <td class="py-3 text-white font-mono min-w-[100px] w-[120px] align-middle">${poolRatio.toFixed(1)}%</td>
                        <!-- <td class="py-3 text-white font-mono min-w-[130px] w-[150px] align-middle">${Math.round(user.initialBalanceTotal).toLocaleString()}</td>
                        <td class="py-3 min-w-[100px] w-[120px] align-middle"><span class="${percentageClass}">${percentageIcon}${user.adjustedPercentage.toFixed(2)}%</span></td> -->
                    </tr>
                `;
            });

            return tableHtml;
        }
    </script>

    <!-- æ’è¡Œæ¦œå¼¹çª— -->
    <div id="ranking-modal" class="fixed inset-0 z-50 hidden modal-backdrop">
        <div class="flex items-center justify-center min-h-screen p-2 sm:p-4">
            <div class="bg-darker rounded-xl sm:rounded-2xl border border-primary/20 max-w-sm sm:max-w-2xl w-full max-h-[90vh] sm:max-h-[80vh] overflow-hidden shadow-2xl">
                <!-- å¼¹çª—å¤´éƒ¨ -->
                <div class="flex items-center justify-between p-4 sm:p-6 border-b border-primary/20">
                    <h2 class="text-lg sm:text-xl font-bold text-white flex items-center">
                        <i class="fa fa-trophy text-secondary mr-2 sm:mr-3 text-xl sm:text-2xl"></i>
                        <span class="zh">åŠ æ± å­è´¡çŒ®æ’è¡Œæ¦œ</span>
                        <span class="en hidden">Pool Contribution Ranking</span>
                    </h2>
                    <button id="ranking-modal-close" class="text-light/60 hover:text-white transition-colors p-2 -m-2">
                        <i class="fa fa-times text-lg sm:text-xl"></i>
                    </button>
                </div>

                <!-- å¼¹çª—å†…å®¹ -->
                <div class="p-4 sm:p-6 overflow-y-auto max-h-[70vh] sm:max-h-[60vh]">
                    <div id="ranking-modal-content">
                        <!-- æ’è¡Œæ¦œå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        <div class="text-center text-light/50 py-6 sm:py-8">
                            <i class="fa fa-spinner fa-spin text-primary text-xl sm:text-2xl mb-3 sm:mb-4"></i>
                            <p class="text-sm sm:text-base zh">åŠ è½½ä¸­...</p>
                            <p class="text-sm sm:text-base en hidden">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
